{% extends "base.html" %}

{% block title %}Calendar - Notion Alternative{% endblock %}

{% block breadcrumb %}
<a href="{{ url_for('index') }}">Home</a>
<span class="breadcrumb-separator">/</span>
<span>Calendar</span>
{% endblock %}

{% block top_bar_actions %}
<button class="btn btn-secondary" onclick="previousMonth()">
    <i class="fas fa-chevron-left"></i>
</button>
<button class="btn btn-secondary" onclick="nextMonth()">
    <i class="fas fa-chevron-right"></i>
</button>
<button class="btn btn-primary" onclick="goToToday()">
    Today
</button>
{% endblock %}

{% block content %}
<div class="calendar-container">
    <div class="calendar-header">
        <h2 id="currentMonth">Calendar</h2>
    </div>
    
    <div class="calendar-grid">
        <div class="calendar-weekdays">
            <div class="weekday">Sun</div>
            <div class="weekday">Mon</div>
            <div class="weekday">Tue</div>
            <div class="weekday">Wed</div>
            <div class="weekday">Thu</div>
            <div class="weekday">Fri</div>
            <div class="weekday">Sat</div>
        </div>
        
        <div class="calendar-days" id="calendarDays">
            <!-- Calendar days will be generated by JavaScript -->
        </div>
    </div>
</div>

<script>
let currentDate = new Date();
let currentMonth = currentDate.getMonth();
let currentYear = currentDate.getFullYear();

// Calendar items from server
const calendarItems = {{ calendar_items | tojson }};

document.addEventListener('DOMContentLoaded', function() {
    renderCalendar(calendarItems, currentMonth, currentYear);
});

function previousMonth() {
    currentMonth--;
    if (currentMonth < 0) {
        currentMonth = 11;
        currentYear--;
    }
    renderCalendar(calendarItems, currentMonth, currentYear);
}

function nextMonth() {
    currentMonth++;
    if (currentMonth > 11) {
        currentMonth = 0;
        currentYear++;
    }
    renderCalendar(calendarItems, currentMonth, currentYear);
}

function goToToday() {
    currentDate = new Date();
    currentMonth = currentDate.getMonth();
    currentYear = currentDate.getFullYear();
    renderCalendar(calendarItems, currentMonth, currentYear);
}

function previousMonth() {
    currentMonth--;
    if (currentMonth < 0) {
        currentMonth = 11;
        currentYear--;
    }
    renderCalendar();
}

function nextMonth() {
    currentMonth++;
    if (currentMonth > 11) {
        currentMonth = 0;
        currentYear++;
    }
    renderCalendar();
}

function goToToday() {
    currentDate = new Date();
    currentMonth = currentDate.getMonth();
    currentYear = currentDate.getFullYear();
    renderCalendar();
}


</script>
{% endblock %} 